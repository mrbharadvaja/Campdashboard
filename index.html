<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUCC PROJECT - JGC NEC Camp Live Dashboard</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;500;600;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #0b1120;
            --card-bg: #1e293b;
            --card-bg-glass: rgba(30, 41, 59, 0.98);
            
            /* Colors */
            --col-vacant: #00ff41; 
            --col-occupied: #2563eb; 
            --col-ooo: #ff0000; 
            --col-reserved: #f97316; 
            --col-visitor: #fbbf24; 
            
            /* Laundry Colors */
            --col-laundry-pick: #d946ef;
            --col-laundry-del: #06b6d4;

            /* Stack Colors */
            --cat-a: #3b82f6; --cat-b: #10b981; --cat-c: #f59e0b; --cat-d: #ef4444; --cat-v: #8b5cf6; 

            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-cyan: #06b6d4;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* Header */
        header {
            background: linear-gradient(90deg, #0f172a 0%, #1e1b4b 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--accent-cyan);
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.2);
            position: relative;
            z-index: 100;
        }

        .header-title h1 {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            font-size: 2.2rem;
            text-transform: uppercase;
            background: linear-gradient(to right, #fff, var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .header-title h2 { font-size: 1.1rem; color: #8b5cf6; margin-bottom: 2px; }

        .live-indicator {
            display: inline-flex; align-items: center; gap: 5px;
            font-family: 'Rajdhani', sans-serif; color: var(--col-ooo); font-weight: bold;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        .greeting-box { font-family: 'Rajdhani', sans-serif; font-size: 1rem; color: var(--col-reserved); font-weight: 600; margin-top: 5px; }

        .live-clock-container { text-align: right; font-family: 'Rajdhani', sans-serif; }
        .live-time { font-size: 1.8rem; font-weight: 700; text-shadow: 0 0 10px rgba(6, 182, 212, 0.5); }
        .live-date { font-size: 0.9rem; color: var(--accent-cyan); }
        .controls { display: flex; gap: 10px; align-items: center; margin-top: 10px; }

        select, button {
            padding: 8px 12px; border-radius: 5px; border: 1px solid var(--accent-cyan);
            background-color: #0f172a; color: #ffffff; font-family: 'Rajdhani', sans-serif; font-weight: 600; cursor: pointer;
        }
        button:hover { background: var(--accent-cyan); color: black; }

        /* 3-COLUMN LAYOUT */
        .dashboard-container { padding: 20px; max-width: 1800px; margin: 0 auto; }
        
        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr 280px;
            gap: 20px;
            align-items: start;
        }

        /* KPI Cards */
        .kpi-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .kpi-card { background: var(--card-bg-glass); border: 1px solid var(--border-color); padding: 15px; border-radius: 12px; text-align: center; position: relative; overflow: hidden; transition: all 0.3s; }
        .kpi-card:hover { transform: translateY(-3px); box-shadow: 0 0 20px rgba(6, 182, 212, 0.2); }
        .kpi-card h3 { font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 5px; }
        .kpi-card .value { font-size: 2rem; font-weight: 700; font-family: 'Rajdhani', sans-serif; }
        .kpi-card .remark { font-size: 0.7rem; color: #fbbf24; font-style: italic; margin-top: 2px; }

        .kpi-card.occupied { border-bottom: 4px solid var(--col-occupied); color: var(--col-occupied); }
        .kpi-card.vacant { border-bottom: 4px solid var(--col-vacant); color: var(--col-vacant); text-shadow: 0 0 10px rgba(0,255,65,0.4); }
        .kpi-card.ooo { border-bottom: 4px solid var(--col-ooo); color: var(--col-ooo); }
        
        /* Sidebars */
        .sidebar-panel { display: flex; flex-direction: column; gap: 20px; }
        .panel-box { background: linear-gradient(180deg, var(--card-bg) 0%, #111827 100%); padding: 15px; border-radius: 12px; border: 1px solid #8b5cf6; }
        .panel-box.laundry { border-color: var(--col-laundry-pick); }
        .panel-box h3 { color: #fff; font-family: 'Rajdhani', sans-serif; margin-bottom: 15px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }

        /* Charts */
        .charts-section { display: flex; flex-direction: column; gap: 20px; }
        .chart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .chart-card { background: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); }
        .chart-card h3 { margin-bottom: 15px; font-family: 'Rajdhani', sans-serif; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; font-size: 1.1rem; }
        
        .canvas-container { position: relative; height: 320px; width: 100%; } 
        .canvas-container.large { height: 380px; }
        .canvas-container.extra-large { height: 450px; }

        /* Laundry Items (Updated Design) */
        .laundry-summary { display: flex; justify-content: space-between; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }
        .ls-box { text-align: center; width: 48%; background: rgba(255,255,255,0.05); padding: 5px; border-radius: 5px; }
        .ls-label { font-size: 0.7rem; color: var(--text-muted); }
        .ls-val { font-size: 1.2rem; font-weight: bold; font-family: 'Rajdhani', sans-serif; }

        .laundry-item { margin-bottom: 10px; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 6px; border-left: 3px solid var(--col-laundry-pick); }
        .laundry-header { display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 5px; color: #fff; font-weight: 500; }
        .laundry-bars { display: flex; height: 6px; border-radius: 3px; overflow: hidden; background: #334155; margin-bottom: 5px; }
        .bar-pick { background: var(--col-laundry-pick); }
        .bar-del { background: var(--col-laundry-del); }
        .laundry-values { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text-muted); }

        /* Notice Board */
        .callout-box { background-color: rgba(139, 92, 246, 0.15); border-left: 5px solid #8b5cf6; padding: 15px; border-radius: 8px; }
        .callout-box h4 { color: #fff; font-size: 1.1rem; margin-bottom: 5px; font-family: 'Rajdhani', sans-serif; }
        .date-badge { display: inline-block; margin-top: 10px; padding: 3px 8px; background: #8b5cf6; color: white; border-radius: 4px; font-size: 0.7rem; }

        /* Footer */
        .reception-footer { margin-top: 30px; padding: 20px; background: var(--card-bg); border-top: 1px solid var(--accent-cyan); border-radius: 12px; }
        .reception-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
        .receptionist { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 10px; text-align: center; transition: 0.3s; }
        .receptionist:hover { background: rgba(255,255,255,0.1); transform: translateY(-3px); border-color: rgba(6, 182, 212, 0.3); }
        .avatar { width: 60px; height: 60px; background: #334155; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; border: 2px solid #fbbf24; overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        .whatsapp-btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; background-color: #25D366; color: white; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-weight: bold; transition: 0.3s; }
        .whatsapp-btn:hover { background-color: #128C7E; transform: scale(1.02); }

        @media (max-width: 1200px) { .main-layout { grid-template-columns: 1fr 2fr; } .right-sidebar { display: none; } }
        @media (max-width: 900px) { .main-layout { grid-template-columns: 1fr; } .chart-row { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div id="dashboard-content">
        <header>
            <div class="header-left">
                <div class="header-title"><h1>TUCC PROJECT <span class="live-indicator"><i class="fas fa-circle"></i> LIVE</span></h1><h2>JGC CAMP MANAGEMENT</h2></div>
                <div class="greeting-box" id="greetingMsg"><i class="fas fa-sun"></i> Good Morning, Team!</div>
            </div>
            <div class="header-right">
                <div class="live-clock-container"><div class="live-time" id="clockTime">00:00:00</div><div class="live-date" id="clockDate">Mon, 01 Jan 2024</div></div>
                <div class="controls">
                    <select id="campSelector" onchange="manualUpdate()">
                        <option value="ALL">ALL CAMPS</option><option value="NEC">NEC CAMP</option><option value="Phoenix">PHOENIX</option><option value="Comcon">COMCON</option>
                    </select>
                    <button onclick="toggleLiveMode()" id="liveBtn"><i class="fas fa-pause"></i> Live</button>
                    <button onclick="exportPDF()"><i class="fas fa-file-pdf"></i> PDF</button>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="kpi-row">
                <div class="kpi-card"><h3>Total Capacity</h3><div class="value" id="kpi-total">0</div></div>
                <div class="kpi-card occupied"><h3>Occupied</h3><div class="value" id="kpi-occupied">0</div></div>
                <div class="kpi-card vacant"><h3>Vacant</h3><div class="value" id="kpi-vacant">0</div><div class="remark">Reverify ongoing..</div></div>
                <div class="kpi-card ooo"><h3>Out of Order</h3><div class="value" id="kpi-ooo">0</div><div class="remark">Reverify ongoing..</div></div>
                <div class="kpi-card reserved"><h3>Reserved</h3><div class="value" id="kpi-reserved">0</div></div>
            </div>

            <div class="main-layout">
                
                <div class="sidebar-panel">
                    <div class="panel-box laundry">
                        <h3><i class="fas fa-tshirt"></i> LAUNDRY STATUS</h3>
                        <div class="laundry-summary">
                            <div class="ls-box"><div class="ls-label">Total Pickup</div><div class="ls-val" id="total-pick" style="color:var(--col-laundry-pick)">0</div></div>
                            <div class="ls-box"><div class="ls-label">Total Deliver</div><div class="ls-val" id="total-del" style="color:var(--col-laundry-del)">0</div></div>
                        </div>
                        <div id="laundry-container"></div>
                        <div style="margin-top:10px; height: 180px;">
                            <canvas id="laundryChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="charts-section">
                    <div class="chart-row">
                        <div class="chart-card">
                            <h3><i class="fas fa-chart-pie"></i> Occupancy Overview</h3>
                            <div class="canvas-container"><canvas id="statusChart"></canvas></div>
                        </div>
                        <div class="chart-card">
                            <h3><i class="fas fa-building"></i> Residents by Company</h3>
                            <div class="canvas-container"><canvas id="companyChart"></canvas></div>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-cubes"></i> Block / Camp Breakdown <span style="font-size:0.8rem; color:red; margin-left:10px;">(Red Bar = Over Capacity)</span></h3>
                        <div class="canvas-container large"><canvas id="blockChart"></canvas></div>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-layer-group"></i> Category Breakdown (A, B, C, D, V)</h3>
                        <div class="canvas-container extra-large"><canvas id="categoryChart"></canvas></div>
                    </div>
                </div>

                <div class="sidebar-panel">
                    <div class="panel-box">
                        <h3><i class="fas fa-bullhorn"></i> NOTICE BOARD</h3>
                        <div class="callout-box">
                            <h4><i class="fas fa-exclamation-circle"></i> NEC CAMP ALERT</h4>
                            <p>GDSK team reverify vacant and out of order room.</p>
                            <div class="date-badge">Today</div>
                        </div>
                    </div>
                    <div class="panel-box">
                        <h3><i class="fas fa-headset"></i> CALL CENTER</h3>
                        <p style="text-align:center; color:#fbbf24; font-size:1.2rem; font-weight:bold;">+62 811-1089-4447</p>
                        <div style="text-align:center; margin-top:10px;">
                            <img src="https://i.imgur.com/VYwr0Tn.png" style="width:100px; border-radius:5px;">
                        </div>
                    </div>
                </div>

            </div>

            <div class="reception-footer">
                <h3 class="reception-title">CAMP RECEPTION TEAM CONTACTS</h3>
                <div class="reception-grid" id="reception-grid"></div>
            </div>
        </div>
    </div>

    <script>
        Chart.register(ChartDataLabels);

        /* =========================================================================
           ðŸ› ï¸ DATA ENTRY ZONE (UPDATED FROM image_e6e7cc.png)
           ========================================================================= */

        // 1. COMPANY DATA
        const companyDataInput = {
            "JGC": 49,          
            "KUEHNE JGC": 3, 
            "Leighton BP": 19,  
            "Meindo": 14,       
            "GDSK-JGC": 5, 
            "Leighton JGC": 13, 
            "Hydrocore JGC": 1, 
            "BP": 71,           
            "Petrosea": 88, 
            "Saipem": 4, 
            "PSU-PTP": 1, 
            "Leighton PTP": 0
        };

        // 2. LAUNDRY STATUS DATA (NEC Only)
        const laundryDataInput = {
            "NEC Block A": { pickup: 35, deliver: 35 },
            "NEC Block B": { pickup: 28, deliver: 28 },
            "NEC Block C": { pickup: 30, deliver: 30 },
            "NEC Block D": { pickup: 25, deliver: 25 },
            "NEC VIP":     { pickup: 5,  deliver: 5 },
            "Comcon Female": { pickup: 0, deliver: 0 },
            "Comcon FB":   { pickup: 0, deliver: 0 },
            "Phoenix 1":   { pickup: 0, deliver: 0 },
            "Phoenix 2":   { pickup: 0, deliver: 0 }
        };

        // 3. CAMP BLOCK DATA (NEC Camp)
        const necCampData = {
            "Block A": { data: [63, 14, 24, 0, 0], capacity: 102 }, // Occ 63, Vac 14, OOO 24
            "Block B": { data: [73, 9, 10, 0, 0],  capacity: 92 },  // Occ 73, Vac 9, OOO 10
            "Block C": { data: [62, 16, 14, 0, 0], capacity: 92 },  // Occ 62, Vac 16, OOO 14
            "Block D": { data: [58, 9, 17, 0, 0],  capacity: 84 },  // Occ 58, Vac 9, OOO 17
            "VIP":     { data: [12, 2, 0, 0, 0],   capacity: 14 }   // Occ 12, Vac 2
        };

        // 4. CATEGORY DATA (Stacked Chart)
        const categoryLabels = ["JGC", "KUEHNE JGC", "Leighton BP", "Meindo", "GDSK-JGC", "Leighton JGC", "Hydrocore JGC", "BP", "Petrosea", "PSU-PTP", "Saipem", "Leighton PTP"];
        const categoryDataSets = [
            { label: 'A', data: [46, 3, 1, 4, 3, 5, 1, 0, 0, 0, 0, 0] },
            { label: 'B', data: [3, 0, 0, 6, 2, 7, 0, 1, 52, 1, 1, 0] },
            { label: 'C', data: [0, 0, 18, 4, 0, 1, 0, 1, 35, 0, 3, 0] },
            { label: 'D', data: [0, 0, 0, 0, 0, 0, 0, 57, 1, 0, 0, 0] },
            { label: 'V', data: [0, 0, 0, 0, 0, 0, 0, 12, 0, 0, 0, 0] }
        ];

        /* =========================================================================
           âš™ï¸ SYSTEM LOGIC
           ========================================================================= */

        const receptionists = [
            { name: "Mr Ario", role: "Camp Reception", phone: "+62 813 9713 7105", wa: "6281397137105", img: "https://i.imgur.com/0RPPvwl.png" },
            { name: "Mr Rais", role: "Camp Reception", phone: "+62 812 4056 3934", wa: "6281240563934", img: "https://i.imgur.com/xjjLFhK.png" },
            { name: "Mr Agung", role: "Camp Reception", phone: "+62 812 5805 6486", wa: "6281258056486", img: "https://i.imgur.com/B5yHfYH.png" },
            { name: "Mr Deepak", role: "JGC Camp Manager", phone: "+62 813-2288-259", wa: "628132288259", img: "https://i.imgur.com/gTWZ0Aw.png" },
            { name: "Mr Mario", role: "JGC Camp Admin", phone: "+62 823-1678-5900", wa: "6282316785900", img: "https://i.imgur.com/3v7R09m.png" }
        ];

        let charts = {};

        function updateDashboard() {
            let stats = { total: 0, occ: 0, vac: 0, ooo: 0, vis: 0, res: 0 };
            
            // Summing NEC Data
            Object.values(necCampData).forEach(block => {
                stats.total += block.capacity;
                stats.occ += block.data[0];
                stats.vac += block.data[1];
                stats.ooo += block.data[2];
            });

            document.getElementById('kpi-total').innerText = stats.total;
            document.getElementById('kpi-occupied').innerText = stats.occ;
            document.getElementById('kpi-vacant').innerText = stats.vac;
            document.getElementById('kpi-ooo').innerText = stats.ooo;

            renderStatusChart(stats);
            renderCompanyChart();
            renderBlockChart();
            renderCategoryChart();
            renderLaundrySection();
        }

        function renderLaundrySection() {
            const container = document.getElementById('laundry-container');
            const totalPickEl = document.getElementById('total-pick');
            const totalDelEl = document.getElementById('total-del');
            
            container.innerHTML = "";
            let labels = [];
            let pickData = [];
            let delData = [];
            let totalP = 0;
            let totalD = 0;

            Object.keys(laundryDataInput).forEach(location => {
                const d = laundryDataInput[location];
                if(d.pickup > 0 || d.deliver > 0) { 
                    const total = d.pickup + d.deliver + 0.01;
                    const pickPct = (d.pickup / total) * 100;
                    const delPct = (d.deliver / total) * 100;
                    
                    totalP += d.pickup;
                    totalD += d.deliver;

                    labels.push(location.replace("NEC ", "").replace("Block ", ""));
                    pickData.push(d.pickup);
                    delData.push(d.deliver);

                    container.innerHTML += `
                        <div class="laundry-item">
                            <div class="laundry-header"><span>${location}</span></div>
                            <div class="laundry-bars">
                                <div class="bar-pick" style="width: ${pickPct}%"></div>
                                <div class="bar-del" style="width: ${delPct}%"></div>
                            </div>
                            <div class="laundry-values">
                                <span style="color:var(--col-laundry-pick)">Pick: ${d.pickup}</span>
                                <span style="color:var(--col-laundry-del)">Del: ${d.deliver}</span>
                            </div>
                        </div>`;
                }
            });
            
            totalPickEl.innerText = totalP;
            totalDelEl.innerText = totalD;

            const ctx = document.getElementById('laundryChart').getContext('2d');
            if(charts.laundry) charts.laundry.destroy();
            charts.laundry = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Pickup', data: pickData, backgroundColor: '#d946ef' },
                        { label: 'Deliver', data: delData, backgroundColor: '#06b6d4' }
                    ]
                },
                options: {
                    indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                    scales: { x: { stacked: true }, y: { stacked: true, ticks: { color: '#94a3b8', font: {size: 10} } } },
                    plugins: { legend: { display: false }, datalabels: { display: false } }
                }
            });
        }

        function renderBlockChart() {
            const ctx = document.getElementById('blockChart').getContext('2d');
            if (charts.block) charts.block.destroy();

            const labels = Object.keys(necCampData);
            const occData = labels.map(k => necCampData[k].data[0]);
            const vacData = labels.map(k => necCampData[k].data[1]);
            const oooData = labels.map(k => necCampData[k].data[2]);
            const capacity = labels.map(k => necCampData[k].capacity);

            const occColors = occData.map((val, idx) => {
                return val > capacity[idx] ? '#ef4444' : '#2563eb'; 
            });

            charts.block = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Occupied', data: occData, backgroundColor: occColors },
                        { label: 'Vacant', data: vacData, backgroundColor: '#00ff41' },
                        { label: 'OOO', data: oooData, backgroundColor: '#ff0000' }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { x: { stacked: true, ticks: { color: '#fff' } }, y: { stacked: true, ticks: { color: '#fff' }, grid: { color: '#334155' } } },
                    plugins: { 
                        legend: { labels: { color: '#fff' } },
                        datalabels: { 
                            color: 'white', font: { weight: 'bold' },
                            formatter: (value, ctx) => {
                                const idx = ctx.dataIndex;
                                if (ctx.datasetIndex === 0 && value > capacity[idx]) return value + "\nâš ï¸"; 
                                return value > 0 ? value : "";
                            }
                        }
                    }
                }
            });
        }

        function renderStatusChart(stats) {
            const ctx = document.getElementById('statusChart').getContext('2d');
            if (charts.status) charts.status.destroy();
            charts.status = new Chart(ctx, {
                type: 'doughnut',
                data: { labels: ['Occ', 'Vac', 'OOO'], datasets: [{ data: [stats.occ, stats.vac, stats.ooo], backgroundColor: ['#2563eb', '#00ff41', '#ff0000'], borderWidth: 0 }] },
                options: { 
                    responsive: true, maintainAspectRatio: false, layout: { padding: 40 },
                    plugins: { 
                        legend: { position: 'bottom', labels: { color: '#fff' } }, 
                        datalabels: { 
                            color: '#fff', font: { weight: 'bold', size: 14 },
                            formatter: (value, ctx) => { if(value===0) return null; let sum = ctx.dataset.data.reduce((a, b) => a + b, 0); let p = (value * 100 / sum).toFixed(1) + "%"; return `${value}\n(${p})`; }
                        } 
                    }
                }
            });
        }

        function renderCompanyChart() {
            const ctx = document.getElementById('companyChart').getContext('2d'); if (charts.company) charts.company.destroy();
            charts.company = new Chart(ctx, {
                type: 'bar',
                data: { labels: Object.keys(companyDataInput), datasets: [{ label: 'Pax', data: Object.values(companyDataInput), backgroundColor: '#06b6d4', borderRadius: 4 }] },
                options: { 
                    responsive: true, maintainAspectRatio: false, indexAxis: 'y',
                    scales: { x: { ticks: { color: '#94a3b8' } }, y: { ticks: { color: '#fff' }, grid: { display: false } } },
                    plugins: { legend: { display: false }, datalabels: { color: '#fff', anchor: 'end', align: 'end' } } 
                }
            });
        }

        function renderCategoryChart() {
            const ctx = document.getElementById('categoryChart').getContext('2d'); if (charts.category) charts.category.destroy();
            charts.category = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: categoryLabels,
                    datasets: [
                        { label: 'A', data: categoryDataSets[0].data, backgroundColor: '#3b82f6' },
                        { label: 'B', data: categoryDataSets[1].data, backgroundColor: '#10b981' },
                        { label: 'C', data: categoryDataSets[2].data, backgroundColor: '#f59e0b' },
                        { label: 'D', data: categoryDataSets[3].data, backgroundColor: '#ef4444' },
                        { label: 'V', data: categoryDataSets[4].data, backgroundColor: '#8b5cf6' }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: { x: { stacked: true, ticks: { color: '#fff', autoSkip: false, maxRotation: 45, minRotation: 45 } }, y: { stacked: true, ticks: { color: '#94a3b8' }, grid: { color: '#334155' } } },
                    plugins: { legend: { labels: { color: '#fff' } }, datalabels: { color: 'white', font: { weight: 'bold', size: 10 }, formatter: (value) => value > 0 ? value : "" } }
                }
            });
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('clockTime').innerText = now.toLocaleTimeString('en-US', { hour12: false });
            document.getElementById('clockDate').innerText = now.toLocaleDateString('en-US', { weekday: 'short', day: 'numeric', month: 'short' });
        }
        setInterval(updateClock, 1000); updateClock();
        
        const container = document.getElementById('reception-grid');
        receptionists.forEach(p => {
            container.innerHTML += `<div class="receptionist"><div class="avatar"><img src="${p.img}"></div><h4>${p.name}</h4><p style="color:#94a3b8;font-size:0.8rem;">${p.phone}</p><a href="https://wa.me/${p.wa}" target="_blank" class="whatsapp-btn"><i class="fab fa-whatsapp"></i> Chat</a></div>`;
        });

        updateDashboard();

    </script>
</body>
</html>
